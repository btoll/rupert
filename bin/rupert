#!/usr/bin/env node --harmony
/* eslint-disable no-console */

'use strict';

let argv = require('yargs')
    .usage('Usage: rupert [options]')

    .demand('f')
    .alias('f', 'file')
    .nargs('f', 1)
    .describe('f', 'The file to analyze')

    .describe('html', 'Creates an html document of the tree')
    .boolean('html')

    .help('h')
    .alias('h', 'help')
    .argv,

    // Default to logging to stdout.
    printer = require(`../src/lib/printer/${!argv.html ? 'log' : 'html'}`),
    makeTree = require('../src/index'),
    file = argv.file;

makeTree(file, printer)
.then(console.log)
.catch(console.log);

